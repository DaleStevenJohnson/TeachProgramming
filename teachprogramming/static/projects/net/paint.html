<canvas id="canvas_element" width="640" height="480"></canvas><!-- // VER: 1 not demo -->
<!--<canvas id="canvas_element" width="320" height="240"></canvas><!-- Hack to get demo size alternate from static size // VER: demo -->
<script>

    var canvas  = document.getElementById('canvas_element');
    var context = canvas.getContext('2d');
    
    var socket     = new WebSocket("ws://localhost:9873/");
    
    function receive(msg) {
        var data;
        eval('data='+msg.data);
        
        if (data.command == 'line') {
            console.log(data);
            context.fillStyle = 'rgba(255,0,0,255)'; //data.color;
            context.fillRect(data.last_pos[0], data.last_pos[1],1,1);
        }
    }
    socket.onmessage = receive;

    
    function eventMouseDown(event) {
        console.log('down');
    }
    canvas.addEventListener('mousedown', eventMouseDown, true);

    
    function eventMouseUp(event) {
        console.log('up');
    }
    canvas.addEventListener('mouseup', eventMouseUp, true);
    
    context.fillStyle = 'rgba(0,0,0,255)';
    context.fillRect(0, 0, canvas.width, canvas.height);

    
    function start() {}
    start();
</script>